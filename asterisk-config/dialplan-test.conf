; ============================================================
; Asterisk Dialplan for WhatsApp Gateway Audio Test
; ============================================================
; Add this to /etc/asterisk/extensions_custom.conf
; Then reload: asterisk -rx "dialplan reload"

[from-whatsapp]
; Test extension - plays music on hold for 30 seconds then hangs up
exten => 1234,1,NoOp(WhatsApp Call Test - Playing Audio)
 same => n,Answer()
 same => n,Wait(1)
 same => n,Playback(tt-monkeys)  ; Built-in sound file
 same => n,Wait(5)
 same => n,Playback(tt-weasels)  ; Another built-in sound
 same => n,Hangup()

; Alternative: Play Music on Hold
exten => 1235,1,NoOp(WhatsApp Call Test - Music on Hold)
 same => n,Answer()
 same => n,Wait(1)
 same => n,MusicOnHold(default,30)  ; 30 seconds of music
 same => n,Hangup()

; Simple beep test
exten => 1236,1,NoOp(WhatsApp Call Test - Beeps)
 same => n,Answer()
 same => n,Wait(1)
 same => n,Playback(beep&beep&beep)
 same => n,Wait(2)
 same => n,Playback(beep&beep&beep)
 same => n,Hangup()

; ============================================================
; PJSIP Endpoint for WhatsApp Gateway
; ============================================================
; Add this to /etc/asterisk/pjsip_custom.conf
; Then reload: asterisk -rx "pjsip reload"

; [whatsapp-gw]
; type=endpoint
; context=from-whatsapp
; transport=transport-udp
; disallow=all
; allow=opus,ulaw,alaw
; auth=whatsapp-auth
; aors=whatsapp-aor
; direct_media=no
; rtp_symmetric=yes
; rewrite_contact=yes
; force_rport=yes
;
; [whatsapp-auth]
; type=auth
; username=sip
; password=sip123
;
; [whatsapp-aor]
; type=aor
; max_contacts=1
